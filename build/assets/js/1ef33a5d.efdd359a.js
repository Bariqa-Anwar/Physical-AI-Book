"use strict";(self.webpackChunkdocusourus_book=self.webpackChunkdocusourus_book||[]).push([[7],{1489:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"module1/ros2-nodes","title":"ROS 2 Nodes and Topics","description":"In ROS 2, the fundamental unit of computation is a Node. Nodes are processes that perform specific tasks, such as reading sensor data, controlling a motor, or performing calculations. Nodes communicate with each other by sending and receiving Messages over Topics. This publish/subscribe messaging pattern is central to ROS 2\'s distributed architecture.","source":"@site/docs/module1/ros2-nodes.md","sourceDirName":"module1","slug":"/module1/ros2-nodes","permalink":"/docs/module1/ros2-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module1/ros2-nodes.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Visualizing URDF in RViz2","permalink":"/docs/introduction/rviz2-urdf"},"next":{"title":"Introduction to Gazebo Simulation","permalink":"/docs/module1/gazebo-intro"}}');var i=n(4848),o=n(8453);const a={sidebar_position:1},c="ROS 2 Nodes and Topics",t={},l=[{value:"1. ROS 2 Workspace Setup",id:"1-ros-2-workspace-setup",level:2},{value:"1.1 Create a new workspace",id:"11-create-a-new-workspace",level:3},{value:"1.2 Initialize the workspace",id:"12-initialize-the-workspace",level:3},{value:"1.3 Source the workspace",id:"13-source-the-workspace",level:3},{value:"2. Creating a ROS 2 Package",id:"2-creating-a-ros-2-package",level:2},{value:"2.1 Create a Python Package",id:"21-create-a-python-package",level:3},{value:"3. ROS 2 Nodes: Publisher and Subscriber",id:"3-ros-2-nodes-publisher-and-subscriber",level:2},{value:"3.1 Publisher Node",id:"31-publisher-node",level:3},{value:"3.2 Subscriber Node",id:"32-subscriber-node",level:3},{value:"4. Building and Running Your Nodes",id:"4-building-and-running-your-nodes",level:2},{value:"4.1 Build the Package",id:"41-build-the-package",level:3},{value:"4.2 Source the Workspace (again)",id:"42-source-the-workspace-again",level:3},{value:"4.3 Run the Nodes",id:"43-run-the-nodes",level:3}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"ros-2-nodes-and-topics",children:"ROS 2 Nodes and Topics"})}),"\n",(0,i.jsxs)(s.p,{children:["In ROS 2, the fundamental unit of computation is a ",(0,i.jsx)(s.strong,{children:"Node"}),". Nodes are processes that perform specific tasks, such as reading sensor data, controlling a motor, or performing calculations. Nodes communicate with each other by sending and receiving ",(0,i.jsx)(s.strong,{children:"Messages"})," over ",(0,i.jsx)(s.strong,{children:"Topics"}),". This publish/subscribe messaging pattern is central to ROS 2's distributed architecture."]}),"\n",(0,i.jsxs)(s.p,{children:["This section will introduce these core concepts and guide you through creating your first ROS 2 Python nodes using ",(0,i.jsx)(s.code,{children:"rclpy"}),", the Python client library for ROS 2. We will also set up a ROS 2 workspace, which is an organized collection of packages."]}),"\n",(0,i.jsx)(s.h2,{id:"1-ros-2-workspace-setup",children:"1. ROS 2 Workspace Setup"}),"\n",(0,i.jsx)(s.p,{children:"A ROS 2 workspace is a directory where you store and build your ROS 2 packages."}),"\n",(0,i.jsx)(s.h3,{id:"11-create-a-new-workspace",children:"1.1 Create a new workspace"}),"\n",(0,i.jsxs)(s.p,{children:["Let's create a new workspace named ",(0,i.jsx)(s.code,{children:"ros2_ws"})," in your home directory."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n"})}),"\n",(0,i.jsx)(s.h3,{id:"12-initialize-the-workspace",children:"1.2 Initialize the workspace"}),"\n",(0,i.jsx)(s.p,{children:"You can initialize an empty workspace with the following command:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# From ~/ros2_ws\ncolcon build --packages-select\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This command will tell ",(0,i.jsx)(s.code,{children:"colcon"})," (the ROS 2 build tool) to set up the necessary build files, though it won't build any packages yet as ",(0,i.jsx)(s.code,{children:"src"})," is empty."]}),"\n",(0,i.jsx)(s.h3,{id:"13-source-the-workspace",children:"1.3 Source the workspace"}),"\n",(0,i.jsx)(s.p,{children:"Before you can use any packages from your workspace, you need to source its setup files. This overlays your workspace on top of your ROS 2 installation."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# From ~/ros2_ws\nsource install/setup.bash\n"})}),"\n",(0,i.jsxs)(s.p,{children:["It's recommended to add this line to your ",(0,i.jsx)(s.code,{children:"~/.bashrc"})," file if you want it to be sourced automatically every time you open a new terminal:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'echo "source ~/ros2_ws/install/setup.bash" >> ~/.bashrc\n'})}),"\n",(0,i.jsx)(s.h2,{id:"2-creating-a-ros-2-package",children:"2. Creating a ROS 2 Package"}),"\n",(0,i.jsx)(s.p,{children:"A ROS 2 package is a container for your nodes, libraries, configuration files, and other ROS-related items."}),"\n",(0,i.jsx)(s.h3,{id:"21-create-a-python-package",children:"2.1 Create a Python Package"}),"\n",(0,i.jsxs)(s.p,{children:["Navigate into the ",(0,i.jsx)(s.code,{children:"src"})," directory of your workspace and create a new Python package named ",(0,i.jsx)(s.code,{children:"my_robot_pkg"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# From ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_pkg\n"})}),"\n",(0,i.jsxs)(s.p,{children:["This command creates a new directory ",(0,i.jsx)(s.code,{children:"my_robot_pkg"})," with a basic structure, including a ",(0,i.jsx)(s.code,{children:"setup.py"})," and ",(0,i.jsx)(s.code,{children:"package.xml"})," file, which are crucial for defining and building your Python package."]}),"\n",(0,i.jsx)(s.h2,{id:"3-ros-2-nodes-publisher-and-subscriber",children:"3. ROS 2 Nodes: Publisher and Subscriber"}),"\n",(0,i.jsx)(s.p,{children:'We will create two simple Python nodes: a publisher that sends "Hello ROS" messages, and a subscriber that receives and prints them.'}),"\n",(0,i.jsx)(s.h3,{id:"31-publisher-node",children:"3.1 Publisher Node"}),"\n",(0,i.jsx)(s.p,{children:"A publisher node sends messages to a topic."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# ros2_ws/src/my_robot_pkg/my_robot_pkg/simple_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass SimplePublisher(Node):\n\n    def __init__(self):\n        super().__init__('simple_publisher')\n        self.publisher_ = self.create_publisher(String, 'my_topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello ROS: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    simple_publisher = SimplePublisher()\n    rclpy.spin(simple_publisher)\n    simple_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(s.h3,{id:"32-subscriber-node",children:"3.2 Subscriber Node"}),"\n",(0,i.jsx)(s.p,{children:"A subscriber node receives messages from a topic."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"# ros2_ws/src/my_robot_pkg/my_robot_pkg/simple_subscriber.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass SimpleSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('simple_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'my_topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    simple_subscriber = SimpleSubscriber()\n    rclpy.spin(simple_subscriber)\n    simple_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(s.h2,{id:"4-building-and-running-your-nodes",children:"4. Building and Running Your Nodes"}),"\n",(0,i.jsxs)(s.p,{children:["After creating your Python files and updating ",(0,i.jsx)(s.code,{children:"setup.py"}),", you need to build your ROS 2 package and then you can run your nodes."]}),"\n",(0,i.jsx)(s.h3,{id:"41-build-the-package",children:"4.1 Build the Package"}),"\n",(0,i.jsxs)(s.p,{children:["Navigate to your workspace root (",(0,i.jsx)(s.code,{children:"~/ros2_ws"}),") and build your package:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# From ~/ros2_ws\ncolcon build --packages-select my_robot_pkg\n"})}),"\n",(0,i.jsx)(s.h3,{id:"42-source-the-workspace-again",children:"4.2 Source the Workspace (again)"}),"\n",(0,i.jsx)(s.p,{children:"After building, you need to re-source your workspace to make the new executables available:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# From ~/ros2_ws\nsource install/setup.bash\n"})}),"\n",(0,i.jsx)(s.h3,{id:"43-run-the-nodes",children:"4.3 Run the Nodes"}),"\n",(0,i.jsx)(s.p,{children:"Open two separate terminals. In the first terminal, run the publisher:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_robot_pkg simple_publisher\n"})}),"\n",(0,i.jsx)(s.p,{children:"In the second terminal, run the subscriber:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_robot_pkg simple_subscriber\n"})}),"\n",(0,i.jsxs)(s.p,{children:["You should see the publisher sending messages and the subscriber receiving them. You can also inspect the topic using ",(0,i.jsx)(s.code,{children:"ros2 topic echo /my_topic"}),"."]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>c});var r=n(6540);const i={},o=r.createContext(i);function a(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);